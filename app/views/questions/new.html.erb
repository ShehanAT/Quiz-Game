<h3>You are currently adding questions to quiz:"<%= @quiz.name %>"</h3>
<ul>  
<li>Name: <%= @quiz.name %></li>
<li>Category: <%= @quiz.category %></li>
<li>Description: <%= @quiz.description %></li>
</ul>
<div class="main_container container">
  <div class="row">
    <div class="add_question_section col-md-6" value="1">
      <div id="question_errors">
      </div>
      <h3 id="add_questions_message">Now Editing Question #1 </h3>
    
      <%= label_tag(:question, "New Question:") %>
      <%= text_field_tag :question, "", :onkeyup => "updateQuestionArr(this)" %>
      <br />
      <%= label_tag(:answer1, "Answer Choice #1:") %>
      <%= text_field_tag :answer1, "", :onkeyup => "updateQuestionArr(this)" %>
      <br />
      <%= label_tag(:answer2, "Answer Choice #2:") %>
      <%= text_field_tag :answer2, "", :onkeyup => "updateQuestionArr(this)" %>
      <br />
      <%= label_tag(:answer3, "Answer Choice #3:") %>
      <%= text_field_tag :answer3, "", :onkeyup => "updateQuestionArr(this)" %>
      <br />
      <%= label_tag(:answer4, "Answer Choice #4:") %>
      <%= text_field_tag :answer4, "", :onkeyup => "updateQuestionArr(this)" %>
      <br />
      <%= label_tag(:correct_answer, "Choose The Correct Answer: ") %>
      <label>
        <input type="checkbox" class="radio" value="1"  />Answer #1</label>
      <label>
        <input type="checkbox" class="radio" value="2"  />Answer #2</label>
      <label>
        <input type="checkbox" class="radio" value="3"  />Answer #3</label>
      <label>
        <input type="checkbox" class="radio" value="4"  />Answer #4</label>
      <br />
    </div>
    <div class="col-md-6">
      <button onclick="addAnotherQuestion()" id="add_question_link" class="btn btn-secondary">Add Another Question</button>
      <button onclick="saveAndSubmit()" id="submit_link" class="btn btn-primary">Save And Exit</button>
      <div class="gallery_container">

      </div>
    </div>
  </div>
 

 
</div>
<script>
var questionArr = [];
var currentQuestion = 0;
$("input[type='checkbox']").attr("correct_answer", "0");
$("input[type='checkbox']").on("click", function(){
  $("input[type='checkbox']").not(this).prop("checked", false);
  if($(this).prop("checked")){
    $(this).attr("correct_answer", "1");
    updateCorrectAnswer(this.value, true);
  }else{
    $(this).attr("correct_answer", "0");
  }
  
});

(function(){
  setupQuestionArr();
}())

function updateCorrectAnswer(value ,checked){
  if(checked){
    for(var i = 1; i <= 4; i++){
      if(i == value){
        questionArr[currentQuestion][`answer${i}`]["correct_answer"] = "1";
      }else{
        questionArr[currentQuestion][`answer${i}`]["correct_answer"] = "0";
      }
    }
  }
/*else{
    questionArr[currentQuestion][`answer${value}`]["correct_answer"] = "0";
  }*/
  console.log(questionArr);
}

function setupQuestionArr(){
  var newQuestion = {
    question: $("#question").text(),
    answer1: {
      answer: $("#answer1").text(),
      correct_answer: "0"
    },
    answer2: {
      answer: $("#answer2").text(),
      correct_answer: "0"
    },
    answer3: {
      answer: $("#answer3").text(),
      correct_answer: "0"
    },
    answer4: {
      answer: $("#answer4").text(),
      correct_answer: "0"
    }
  }
  questionArr.push(newQuestion);
}

function eraseTextFields(){
  $("#question").val("");
  $("#answer1").val("");
  $("#answer2").val("");
  $("#answer3").val("");
  $("#answer4").val("");
  $("input[type='checkbox']").prop("checked", false);
}
</script>


